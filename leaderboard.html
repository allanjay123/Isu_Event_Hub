<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaderboard | ISU Standings</title>
    <style>
        body { background-color: #f0f2f5; font-family: Arial, sans-serif; margin: 0; padding: 0; }
        .header { background-color: #2d5a27; color: white; padding: 25px; text-align: center; font-size: 24px; font-weight: bold; text-transform: uppercase; }
        .container { max-width: 1000px; margin: 30px auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .btn-add { background-color: #2d5a27; color: white; padding: 10px 15px; border-radius: 5px; text-decoration: none; font-weight: bold; display: inline-block; margin-bottom: 20px; cursor: pointer; border: none; }
        table { width: 100%; border-collapse: collapse; }
        th { background-color: #facc15; color: #2d5a27; text-align: left; padding: 12px; border: 1px solid #ddd; }
        td { padding: 12px; border: 1px solid #ddd; }
        .btn-edit { background-color: #2d5a27; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; }
        .btn-delete { background-color: #d9534f; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; }
        .back-link { display: block; margin-top: 20px; color: #2d5a27; font-weight: bold; text-decoration: none; }
    </style>
</head>
<body>
    <div class="header">ISU Leaderboard List</div>
    <div class="container">
        <button class="btn-add" onclick="addScore()">+ Add Score</button>
        
        <table>
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Department</th>
                    <th>Points</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="leaderboard-body">
                </tbody>
        </table>
        <a href="index.html" class="back-link">‚Üê Back to Dashboard</a>
    </div>

    <script>
        // 1. Kuhanin ang data mula sa localStorage o gumamit ng default data kung wala pa
        let scores = JSON.parse(localStorage.getItem('isuScores')) || [
            { dept: 'CCSICT (Crows)', points: 1250 },
            { dept: 'CTE (Tigers)', points: 1100 }
        ];

        // 2. Function para i-display ang data sa table
        function displayScores() {
            const tbody = document.getElementById('leaderboard-body');
            
            // I-sort ang scores mula mataas pababa para sa Ranking
            scores.sort((a, b) => b.points - a.points);
            
            tbody.innerHTML = scores.map((item, index) => `
                <tr>
                    <td>${index + 1}</td>
                    <td>${item.dept}</td>
                    <td>${Number(item.points).toLocaleString()}</td>
                    <td>
                        <button class="btn-edit" onclick="editScore(${index})">Edit</button>
                        <button class="btn-delete" onclick="deleteScore(${index})">Delete</button>
                    </td>
                </tr>
            `).join('');

            // I-save ang updated list sa localStorage
            localStorage.setItem('isuScores', JSON.stringify(scores));
        }

        // 3. Function para mag-ADD ng bagong score
        function addScore() {
            const dept = prompt("Enter Department Name:");
            const points = prompt("Enter Points:");
            
            if (dept && points && !isNaN(points)) {
                scores.push({ dept: dept, points: parseInt(points) });
                displayScores();
            } else {
                alert("Please enter a valid department name and numeric points.");
            }
        }

        // 4. Function para mag-DELETE
        function deleteScore(index) {
            if (confirm(`Are you sure you want to delete ${scores[index].dept}?`)) {
                scores.splice(index, 1);
                displayScores();
            }
        }

        // 5. Function para mag-EDIT
        function editScore(index) {
            const newDept = prompt("Edit Department Name:", scores[index].dept);
            const newPoints = prompt("Edit Points:", scores[index].points);
            
            if (newDept && newPoints && !isNaN(newPoints)) {
                scores[index].dept = newDept;
                scores[index].points = parseInt(newPoints);
                displayScores();
            } else {
                alert("Invalid input. Please try again.");
            }
        }

        // Patakbuhin ang displayScores sa pag-load ng page
        displayScores();
    </script>
</body>
</html>
